webpackJsonp([1],{0:function(e,t,n){e.exports=n("x35b")},1:function(e,t){},2:function(e,t){},"37ai":function(e,t,n){var r=n("Fdlp");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("10608838",r,!0,{shadowMode:!1,sourceMap:!1})},"3Djb":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.container[data-v-332de150] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  padding: 0;\n}\n.container .opration-list[data-v-332de150],\n.container .layer-list[data-v-332de150] {\n  width: 100%;\n}\n.container .opration-list[data-v-332de150] {\n  overflow-y: scroll;\n  height: 50%;\n}\n.container .layer-list[data-v-332de150] {\n  height: 45%;\n  -webkit-box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.container .do-history[data-v-332de150] {\n  height: 50px;\n  margin: 10px 0;\n}\n",""])},"7zck":function(e,t){},"8hni":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.container[data-v-59efd272] {\n  padding: 10px;\n  min-width: 200px;\n}\n",""])},A97Z:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\nsection > *[data-v-f536988c] {\n  visibility: hidden;\n  pointer-events: none;\n  width: 50%;\n  display: inline-block;\n}\nsection > *.show[data-v-f536988c] {\n  visibility: initial;\n  pointer-events: initial;\n}\n",""])},DlIb:function(e,t){},"EU//":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\ncanvas[data-v-d6fa11d6] {\n  background: white;\n}\n.edit[data-v-d6fa11d6] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: unset;\n  min-width: 100px;\n  line-height: 24px;\n  border: dashed 1px #eeeeee;\n  outline: 0;\n  max-width: 100vw;\n  resize: both;\n}\n",""])},FTPJ:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.results[data-v-02f0d213] {\n  position: relative;\n  display: inline-block;\n  height: inherit;\n  overflow-x: auto;\n  overflow-y: hidden;\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  cursor: pointer;\n}\n.results img[data-v-02f0d213] {\n  width: auto;\n  height: 100%;\n}\n",""])},Fdlp:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\nsection[data-v-a89d0eda] {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  background: white;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\nsection .layer-list-header[data-v-a89d0eda] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding: 10px;\n  color: #424242;\n}\nsection .layer-list[data-v-a89d0eda] {\n  height: inherit;\n  overflow-y: scroll;\n  padding-bottom: 100px;\n}\nsection .layer-list .list-item[data-v-a89d0eda] {\n  line-height: 2.5em;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: pointer;\n}\nsection .layer-list .list-item div[data-v-a89d0eda] {\n  min-width: 30px;\n  text-align: center;\n  color: #9e9e9e;\n}\nsection .layer-list .list-item .layer-name[data-v-a89d0eda] {\n  color: #212121;\n  text-align: left;\n  width: 100%;\n}\nsection .layer-list .list-item .layer-operation[data-v-a89d0eda]:hover {\n  background: #e0e0e0;\n}\nsection .layer-list .list-item[data-v-a89d0eda]:hover {\n  background: #eeeeee;\n}\n",""])},"HN+T":function(e,t,n){var r=n("x38r");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("603bdbce",r,!0,{shadowMode:!1,sourceMap:!1})},"I0/n":function(e,t,n){var r=n("xXwu");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("041d6704",r,!0,{shadowMode:!1,sourceMap:!1})},J5Ea:function(e,t){},MqO0:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.menu-container[data-v-0d822f3e] {\n  display: inline-block;\n  position: fixed;\n  padding: 10px 0;\n  min-width: 100px;\n  background: white;\n  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n  z-index: 999;\n  border-radius: 3px;\n  color: #424242;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.menu-container ul[data-v-0d822f3e] {\n  list-style-type: none;\n  display: block;\n}\n.menu-container ul li[data-v-0d822f3e] {\n  line-height: 2.5em;\n  padding: 0 10px;\n  cursor: pointer;\n}\n.menu-container ul li[data-v-0d822f3e]:hover {\n  background: #f5f5f5;\n}\n",""])},PxZj:function(e,t,n){var r=n("wIA+");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("7d39ac20",r,!0,{shadowMode:!1,sourceMap:!1})},Qa0o:function(e,t,n){var r=n("FTPJ");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("65da31f4",r,!0,{shadowMode:!1,sourceMap:!1})},"VDg/":function(e,t){},VtGi:function(e,t,n){var r=n("8hni");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("ff19565c",r,!0,{shadowMode:!1,sourceMap:!1})},gnze:function(e,t,n){var r=n("zJp4");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("514a12f7",r,!0,{shadowMode:!1,sourceMap:!1})},iB4b:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.editable-label {\n  display: inline-block;\n  vertical-align: middle;\n}\n.editable-label input {\n  border: 1px solid #999999;\n  width: 100%;\n}\n.editable-label__input {\n  width: 100%;\n  background: none;\n  border: none;\n  border-bottom: 1px solid #bdbdbd;\n  vertical-align: middle;\n}\n.editable-label__text,\n.editable-label__input {\n  outline: none;\n}\n.editable-label__text {\n  color: #757575;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.editable-label__placeholder {\n  color: #424242;\n}\n",""])},j30P:function(e,t,n){var r=n("iB4b");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("7657f713",r,!0,{shadowMode:!1,sourceMap:!1})},oL6C:function(e,t,n){var r=n("A97Z");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("2df43a30",r,!0,{shadowMode:!1,sourceMap:!1})},oppo:function(e,t){},q8N1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"defaultFontSize",function(){return s}),n.d(t,"defaultBrushSize",function(){return c}),n.d(t,"defaultColor",function(){return u}),n.d(t,"mutations",function(){return p});var r=n("n12u"),i=(n.n(r),n("U6qc")),o=(n.n(i),n("WpTh")),a=(n.n(o),n("uJiy")),s=16,c=5,u="black",l={results:[],selectedResult:null,canvasSize:{width:0,height:0},selectMode:a["MODE_BRUSH"],layers:[],color:u,fontSize:s,brushSize:c},d={activeLayer:function(e){return e.layers.find(function(e){return e.selected})}},p={setResults:function(e,t){e.results=t},removeResultItem:function(e,t){e.results.splice(t,1)},selectResult:function(e,t){e.selectedResult=null,e.selectedResult=t},setCanvasSize:function(e,t){e.canvasSize=t},changeSelectMode:function(e,t){e.selectMode=t},updateLayer:function(e,t){var n=e.layers.findIndex(function(e){return e.id===t.id}),r=Object.assign({},e.layers[n],t);e.layers.splice(n,1,r)},setLayers:function(e,t){e.layers=t},selectLayer:function(e,t){if(void 0!==t){var n="number"===typeof t?e.layers.find(function(e){return e.id===t}):t;e.layers.forEach(function(e){return e.selected=!1});var r=e.layers.findIndex(function(e){return e.id===n.id}),i=e.layers.splice(r,1)[0];i.selected=!0,e.layers.splice(r,0,i)}},setColor:function(e,t){e.color=t},setFontSize:function(e,t){e.fontSize=t},setBrushSize:function(e,t){e.brushSize=t}};t["default"]={name:"board",namespaced:!0,getters:d,state:l,mutations:p}},qCMr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=10,i={indexR:0,recordList:[],lock:!1},o={enableUndo:function(e){return!!e.recordList.length&&e.indexR<e.recordList.length-1},enableRedo:function(e){return!(!e.recordList.length||!e.indexR)&&0!==e.indexR}},a={updateIndexR:function(e,t){e.indexR=t},record:function(e,t){if(!e.lock){var n=e.recordList.slice(0,r-1-e.indexR);n.push(t),e.indexR=0,n.length>r&&n.shift(),e.recordList=n}},undo:function(e){e.indexR!==r-1&&e.indexR!==e.recordList.length-1&&e.indexR++},redo:function(e){0!==e.indexR&&e.indexR--},lockHistory:function(e){e.lock=!0},unlockHistory:function(e){e.lock=!1}},s=function(e,t){e.type,e.payload,t.history};t["default"]={name:"history",namespaced:!0,getters:o,state:i,mutations:a,subscribe:s}},qOAO:function(e,t,n){var r=n("3Djb");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("4ae226da",r,!0,{shadowMode:!1,sourceMap:!1})},"qx+2":function(e,t,n){var r=n("EU//");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("5a4866ef",r,!0,{shadowMode:!1,sourceMap:!1})},rMn4:function(e,t,n){var r=n("MqO0");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("3ccaf302",r,!0,{shadowMode:!1,sourceMap:!1})},uJiy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MODE_NEW_PROJECT",function(){return r}),n.d(t,"MODE_SELECT",function(){return i}),n.d(t,"MODE_BRUSH",function(){return o}),n.d(t,"MODE_ERASER",function(){return a}),n.d(t,"MODE_FILL",function(){return s}),n.d(t,"MODE_ADD_TEXT",function(){return c}),n.d(t,"MODE_COLORIZE",function(){return u}),n.d(t,"MODE_CHANGE_COLOR",function(){return l}),n.d(t,"MODE_DOWNLOAD",function(){return d}),n.d(t,"MODE_EMPTY",function(){return p}),n.d(t,"MODE_BRUSH_SIZE",function(){return f}),n.d(t,"MODE_ADD_IMAGE",function(){return h}),n.d(t,"EV_ADD_SVG_TO_LAYER",function(){return v}),n.d(t,"EV_COLORIZE",function(){return y}),n.d(t,"EV_ADD_LAYER",function(){return m}),n.d(t,"EV_CHANGE_LAYER_NAME",function(){return g}),n.d(t,"EV_DELETE_LAYER",function(){return b}),n.d(t,"EV_COPY_LAYER",function(){return w}),n.d(t,"EV_MERGE_LAYER",function(){return _}),n.d(t,"EV_TOGGLE_DRAWER",function(){return x}),n.d(t,"EV_UPDATE_LAYER_DEPTH",function(){return E}),n.d(t,"EV_DOWNLOAD_CANVAS",function(){return O}),n.d(t,"EV_EMPTY_PROJECT",function(){return j}),n.d(t,"EV_ADD_IMAGE",function(){return R}),n.d(t,"DEVICE_WIDTH",function(){return k}),n.d(t,"DEVICE_MOBILE",function(){return C}),n.d(t,"DEVICE_VIEWPORT",function(){return S}),n.d(t,"SYSTEM_IOS",function(){return D}),n.d(t,"DIALOG_PREVIEW",function(){return M});var r="New Project",i="Select",o="Brush",a="Eraser",s="Fill color",c="Add text",u="Colorize",l="Change color",d="Download",p="Empty",f="Brush size",h="Add image",v="Add svg to layer",y="Colorize",m="Add layer",g="Change layer name",b="Delete layer",w="Copy layer",_="Merge layer",x="Toggle drawer",E="Update layer depth",O="Download canvas",j="Empty project",R="Add image",k=window?document.documentElement.clientWidth:null,C=k?k<960:null,S=k?k<600?"xs":k<960?"sm":k<1264?"md":k<1940?"lg":"xl":null,D=!!window&&-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),M="Dialog preview"},"vd+d":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.icon-button[data-v-5c78ab2c] {\n  display: block;\n}\n",""])},"wIA+":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.logo[data-v-5d907f84] {\n  margin-top: 1px;\n}\n",""])},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/5sW"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],a=n("XyMi");function s(e){n("I0/n")}var c=null,u=!1,l=s,d=null,p=null,f=Object(a["a"])(c,i,o,u,l,d,p),h=f.exports,v=n("/ocq"),y=(n("gbyG"),n("Gh7F"),n("Biqn")),m=n.n(y),g=n("Z60a"),b=n.n(g),w=n("C9uT"),_=n.n(w),x=n("T/v0"),E=n.n(x),O=n("j/rp"),j=n.n(O),R=n("Oy1H"),k=n.n(R),C=n("EOM2"),S=n("ipus"),D=n("uJiy"),M=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},L=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},I=Object(S["e"])("board",S["d"]),A=Object(S["e"])("board",S["c"]),P=function(e){function t(){return b()(this,t),E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),_()(t,[{key:"menu",value:function(e){this.selectedResult=e}},{key:"addSVGToNewLayer",value:function(){var e=this.selectedResult;this.$events.emit(D["EV_ADD_SVG_TO_LAYER"],e)}},{key:"contextmenu",get:function(){var e={triggerEvent:["contextmenu"],menu:[{title:"添加到新图层",event:this.addSVGToNewLayer}]};return e}}]),t}(C["Vue"]);M([I,L("design:type",Array)],P.prototype,"results",void 0),M([A,L("design:type",Object)],P.prototype,"removeResultItem",void 0),M([A,L("design:type",Object)],P.prototype,"selectResult",void 0),M([Object(C["Prop"])({default:"100%"}),L("design:type",String)],P.prototype,"width",void 0),P=M([C["Component"]],P);var z=P,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.results.length?n("div",{directives:[{name:"menu",rawName:"v-menu",value:e.contextmenu,expression:"contextmenu"}],staticClass:"results",style:{width:e.width}},[e._l(e.results,function(t,r){return[n("img",{key:r,attrs:{src:t.url},on:{click:function(n){e.selectResult(t)},error:function(t){e.removeResultItem(r)},"!contextmenu":function(n){e.menu(t)}}})]})],2):e._e()},V=[];function B(e){n("Qa0o")}var $=!1,N=B,F="data-v-02f0d213",H=null,G=Object(a["a"])(z,T,V,$,N,F,H),W=G.exports,Y=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},U=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Z=Object(S["e"])("board",S["d"]),J=Object(S["e"])("board",S["c"]),q=function(e){function t(){return b()(this,t),E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),_()(t,[{key:"allSize",get:function(){return Array.apply(null,{length:30}).map(function(e,t){return{text:t+12}})}}]),t}(C["Vue"]);Y([Object(C["Prop"])({default:"100%"}),U("design:type",String)],q.prototype,"width",void 0),Y([Z,U("design:type",String)],q.prototype,"fontSize",void 0),Y([J,U("design:type",Object)],q.prototype,"setFontSize",void 0),q=Y([C["Component"]],q);var X=q,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{style:{width:e.width},attrs:{row:""}},[n("v-flex",{attrs:{md1:"",lg1:"",xl1:"",xs4:""}},[n("v-subheader",[e._v("样式")])],1),n("v-flex",{staticClass:"mr-1 pt-2",attrs:{md2:"",lg2:"",xl2:"",xs4:""}},[n("v-select",{attrs:{items:e.allSize,label:"字号 "+e.fontSize,"item-value":e.fontSize.toString(),"single-line":"",auto:"","hide-details":""},on:{input:function(t){return e.setFontSize(t.text)}}})],1)],1)},K=[];function ee(e){n("z8QP")}var te=!1,ne=ee,re="data-v-ba9a784e",ie=null,oe=Object(a["a"])(X,Q,K,te,ne,re,ie),ae=oe.exports,se=n("NYxO"),ce={name:"IHeader",components:{IDrawResults:W,IDrawTextSetting:ae},computed:m()({},Object(se["e"])("board",["selectMode","results"]),{showTitle:function(){var e=this.selectMode;return![D["MODE_BRUSH"],D["MODE_ADD_TEXT"]].includes(e)||(!D["DEVICE_MOBILE"]||e===D["MODE_BRUSH"]&&!this.results.length)}})},ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{fixed:"",app:""}},[e.DEVICE_MOBILE?n("v-toolbar-side-icon",{on:{click:function(t){e.$events.emit(e.EV_TOGGLE_DRAWER)}}}):n("v-icon",{staticClass:"logo",attrs:{color:"blue darken-2"}},[e._v("data_usage")]),n("v-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:e.showTitle,expression:"showTitle"}]},[e._v("SmartDraw")]),n("v-spacer"),e.selectMode===e.MODE_BRUSH?n("IDrawResults",{staticStyle:{"padding-top":"10px"},attrs:{width:"75%"}}):e._e(),e.selectMode===e.MODE_ADD_TEXT?n("IDrawTextSetting",{attrs:{width:"75%"}}):e._e()],1)},le=[];function de(e){n("PxZj")}var pe=!1,fe=de,he="data-v-5d907f84",ve=null,ye=Object(a["a"])(ce,ue,le,pe,fe,he,ve),me=ye.exports,ge=(n("WpTh"),n("NM/j")),be=n.n(ge),we=(n("n12u"),n("EuXz"),n("y9m4"),n("SldL"),n("7hDC")),_e=n.n(we),xe=(n("No4x"),n("mtWM")),Ee=n.n(xe),Oe=n("q8N1"),je=n("M4fF"),Re=n("8+St"),ke=n("M2cA"),Ce=n("162o"),Se=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},De=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Me=2,Le=function(){function e(t,n,r){var i=this;b()(this,e),this.drawing=!1,this.previousAxis=new ke["Point"](0,0),this.currentShape=[],this.shapes=[],this.selectMode=D["MODE_BRUSH"],this.borderPadding=0,this.color=Oe["defaultColor"],this.strokeWidth=Oe["defaultBrushSize"],this.fontSize=Oe["defaultFontSize"],this.onResponse=je["noop"],this.el=t,this.ctx=t.getContext("2d"),this.project=new ke["Project"](t);var o=this.project.view;o.onMouseDrag=function(e){return i.mouseDrag(e)},o.onMouseDown=function(e){return i.mousedown(e)},o.onMouseUp=function(e){return i.mouseup(e)},o.onMouseLeave=function(e){return i.mouseout(e)},this.setCanvasSize({width:n,height:r});var a=document.createElement("img");a.src="/img/draw/texture.png",a.onload=function(){i.texture=a,i.ctx.strokeStyle=i.ctx.createPattern(a,"repeat")}}return _()(e,[{key:"mousedown",value:function(e){if(e.event.button!==Me)switch(this.selectMode){case D["MODE_BRUSH"]:case D["MODE_ERASER"]:return this.startDraw(e);case D["MODE_FILL"]:return this.fill(e)}}},{key:"mousemove",value:function(e){if(this.selectMode===D["MODE_BRUSH"]){if(!this.drawing)return;var t=this.setAxis(e);this.draw(t)}this.selectMode===D["MODE_ERASER"]&&this.erase(e)}},{key:"mouseup",value:function(e){e.event.button!==Me&&this.path&&this.selectMode===D["MODE_BRUSH"]&&this.selectMode===D["MODE_BRUSH"]&&(this.path.simplify(10),this.stopDrawing(e))}},{key:"mouseout",value:function(e){this.drawing&&this.stopDrawing(e)}},{key:"mouseDrag",value:function(e){var t=Object(je["get"])(e,"event.targetTouches.length");if(t&&t>1)return e.stop();this.mousemove(e);var n=[D["MODE_SELECT"],D["MODE_ADD_TEXT"]];if(n.includes(this.selectMode)){var r=this.project.activeLayer;r.applyMatrix=!0,r.translate(e.delta),r.applyMatrix=!1}}},{key:"startDraw",value:function(e){this.drawing=!0,this.pressedAt=Date.now(),this.currentShape=[];var t=this.setAxis(e),n=new ke["Path"]({segments:[new ke["Point"](t.x,t.y)],strokeColor:this.color,strokeWidth:this.strokeWidth});this.path=n,this.path.name="draw"}},{key:"stopDrawing",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.drawing=!1,n=this.project.activeLayer,r=n.children.content,"initial"===n.data.type,r.addChild(this.path),i=this.path.firstSegment.point,o=this.path.lastSegment.point,a=i.getDistance(o,!1),a<6&&(this.path.closePath(!1),this.path.fillColor="#ffffff"),this.updateBorder(),this.updateShapes();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateShapes",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("post..."),this.shapes.push(this.currentShape),Ee.a.post("http://api.buzhundong.com/autodraw",this.shapes).then(function(e){var n=e.data,r=n.map(function(e){return["url","url_variant_1","url_variant_2"].map(function(t){return{name:e.name,confidence:e.confidence,url:e[t]}})});t.onResponse(Object(je["union"])(Object(je["flatten"])(r)))});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"colorize",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.areaBorder&&(this.areaBorder.visible=!1),e.next=3,new Promise(function(e){return Object(Ce["setTimeout"])(e,50)});case 3:return e.next=5,new Promise(function(e){return a.el.toBlob(function(t){return e(t)})});case 5:return t=e.sent,e.next=8,new Promise(function(e){return a.el.cloneNode().toBlob(function(t){return e(t)})});case 8:return n=e.sent,r=new FormData,r.append("line",t||""),r.append("ref",n||""),e.prev=12,e.next=15,Ee.a.post("http://api.buzhundong.com/autodraw/colorize",r,{timeout:2e4});case 15:if(i=e.sent,i){e.next=18;break}return e.abrupt("return",null);case 18:return o=i.data.url,e.abrupt("return",o);case 22:throw e.prev=22,e.t0=e["catch"](12),e.t0;case 25:case"end":return e.stop()}},e,this,[[12,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"fill",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.project.activeLayer,n){e.next=3;break}return e.abrupt("return");case 3:if(r=n.hitTest(t.point),r){e.next=6;break}return e.abrupt("return");case 6:i=r.type,o=r.item,"fill"===i&&(o.fillColor=this.color),"stroke"===i&&(o.strokeColor=this.color);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setAxis",value:function(e){return this.previousAxis=e.point,e.point}},{key:"draw",value:function(e){var t=e.x,n=e.y,r=new ke["Point"](t,n);this.path.add(r),this.currentShape.push({x:t,y:n})}},{key:"erase",value:function(e){this.project.activeLayer;this.path.add(e.point),this.path.strokeWidth=15,this.path.blendMode="destination-out"}},{key:"drawSVG",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,c,u,l,d,p,f,h,v,y,m,g,b,w,_=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.project.layers.find(function(e){return e.id===_.project.activeLayer.id}),n&&(i=this.createLayer(),o=this.project.view.size,a=o.width,s=o.height,i.position=new ke["Point"](a/4,s/4),this.selectLayer(i.id)),c=this.project.activeLayer,u=c.bounds,l=u.left,d=u.top,p=r.bounds,f=p.width,h=p.height,v=new ke["Point"](l+f/2,d+h/2),y=new ke["Raster"],m=Math.min(f,h)-(this.areaBorder.visible?this.borderPadding:0),g={width:m,height:m},e.next=11,new Promise(function(e,n){return y.importSVG(t,e)});case 11:b=e.sent,b.set({bounds:{size:g}}),b.position=v,b.strokeColor=this.color,b.strokeWidth=this.strokeWidth,b.name="svg",w=c.children.content,w.removeChildren(),w.addChild(b),this.clearShapes();case 21:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"addImage",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this.createLayer(),r=new ke["Raster"],i=this.project.view.size,i.width,i.height,r.width=t.width,r.height=t.height,r.drawImage(t,new ke["Point"](0,0)),r.name="image",n.children.content.addChild(r),this.updateBorder();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBorder",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.project.activeLayer,this.areaBorder&&this.areaBorder.remove(),t.children.content.children.length){e.next=4;break}return e.abrupt("return");case 4:if(n=t.bounds,r=n.point,i=n.size,this.areaBorder=new ke["Group"],this.areaBorder.name="border",o=this.borderPadding,a=new ke["Path"].Rectangle(r,i),a.name="dashed",this.areaBorder.addChild(a),a.strokeColor="rgba(0,0,0,0.2)",a.dashArray=[10,4],a.position=new ke["Point"](r.x+(i.width-o)/2,r.y+(i.height-o)/2),a.bounds.size=new ke["Size"](i.width+o,i.height+o),t.addChild(this.areaBorder),this.areaBorder){e.next=18;break}return e.abrupt("return");case 18:[D["MODE_SELECT"]].includes(this.selectMode)?this.areaBorder.visible=!0:this.areaBorder.visible=!1,this.updateControlBorder();case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateControlBorder",value:function(){var e=this,t=this.project.activeLayer,n=this.areaBorder.children.dashed,r=t.children.content,i=(this.borderPadding,this.areaBorder.children.control);i&&i.remove();var o=D["DEVICE_MOBILE"]?10:5,a=(r.bounds.center,new ke["Group"]);a.name="control",this.areaBorder.addChild(a);var s=function(e){e.data.type="control-point",e.strokeColor=n.strokeColor,e.fillColor="white",e.onMouseDown=function(){return e.fillColor=n.strokeColor},e.onMouseUp=function(){return e.fillColor="white"},e.onMouseLeave=function(){return e.fillColor="white"},a.addChild(e)},c=new ke["Size"](2*o,2*o),u=new ke["Path"].Circle(new ke["Point"](0,0),o);s(u);var l=new ke["Path"].Rectangle(new ke["Point"](0,0),c);s(l);var d=function(){var e=r.bounds,t=e.x,i=e.y,o=e.width;l.position=n.segments[3].point,u.position=new ke["Point"](t+o/2,i-20)};d();var p=function(t){if(e.selectMode===D["MODE_SELECT"]){var i=r.bounds.center,o=t.delta,a=(o.x,o.y,i.getDistance(new ke["Point"](t.point.x-t.delta.x,t.point.y-t.delta.y))),s=i.getDistance(t.point),c=s/a;r.scale(c),n.scale(c),d(),t.stop()}};l.onMouseDrag=p,u.onMouseDrag=function(e){t.rotation=180*Math.atan2(e.point.y-t.bounds.center.y,e.point.x-t.bounds.center.x)/Math.PI+90,d(),e.stop()}}},{key:"createLayer",value:function(){var e=new ke["Layer"],t=new ke["Group"];return t.name="content",e.addChild(t),e.applyMatrix=!1,e.name="图层 ".concat(this.project.layers.length),e.sendToBack(),this.selectLayer(e.id),Object.defineProperty(e.data,"type",{get:function(){return e.children.content.children.length?void 0:"initial"}}),e}},{key:"changeLayerName",value:function(e,t){var n=e;if(t){var r=this.project.layers.find(function(e){return e.id===t});r&&(r.name=n)}else this.project.activeLayer.name=n}},{key:"deleteLayer",value:function(e){if(1!==this.project.layers.length){var t=this.project.layers.find(function(t){return t.id===e});t&&(t.removeChildren(),t.remove(),this.updateBorder())}}},{key:"mergeLayer",value:function(e){var t=e.fromId,n=e.toId,r=this.project.layers[t],i=this.project.layers.find(function(e){return e.id===n});if(!r||!i)throw"fromId or toId does not exist.";this.selectLayer(i.id),r.children.content.copyTo(i.children.content),r.remove(),this.updateBorder()}},{key:"clearBoard",value:function(){this.project.activeLayer.removeChildren()}},{key:"clearShapes",value:function(){this.currentShape=[],this.shapes=[]}},{key:"setCanvasSize",value:function(e){var t=e.width,n=e.height;this.project.view.viewSize.width=t,this.project.view.viewSize.height=n}},{key:"setSelectMode",value:function(e){this.selectMode=e,this.updateBorder()}},{key:"selectLayer",value:function(e){var t=this.project.layers.find(function(t){return t.id===e});t&&t.id!==this.project.activeLayer.id&&(t.activate(),this.updateBorder(),this.clearShapes())}},{key:"getLayerByCoord",value:function(e,t){var n=this.project.hitTest(new ke["Point"](e,t));return n?n.item.layer:null}},{key:"copyLayer",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t?this.project.layers.find(function(e){return e.id===t}):this.project.activeLayer,this.areaBorder&&this.areaBorder.remove(),r=this.createLayer(),r.children.content.copyContent(n.children.content),this.project.addLayer(r),this.selectLayer(r.id),r.translate(new ke["Point"](10,10));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addText",value:function(e,t){var n=t.left,r=t.top,i=new ke["PointText"]({point:[100,100],content:e,fillColor:this.color,fontSize:this.fontSize,position:new ke["Point"](n,r)}),o=this.createLayer(),a=o.children.content;a.addChild(i),this.selectLayer(o.id),this.updateBorder()}}]),e}();Se([Object(Re["Debounce"])(1e3,{leading:!0}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],Le.prototype,"updateShapes",null);var Ie=n("VDg/"),Ae=n("J5Ea"),Pe=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ze=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Te=Object(S["e"])("board",S["c"]),Ve=Object(S["e"])("board",S["d"]),Be=(Object(S["e"])("board",S["a"]),Object(S["e"])("board",S["b"])),$e=Object(S["e"])("history",S["c"]),Ne=Object(S["e"])("history",S["d"]),Fe={display:"none",left:"-100",top:"-100",color:"initial"},He=function(e){function t(){var e;return b()(this,t),e=E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.draw={},e.inputStyle=Fe,e.lastRotation={rotation:0,scale:0},e}return j()(t,e),_()(t,[{key:"mounted",value:function(){var e=this,t=this.resize(),n=t.width,r=t.height;this.draw=new Le(this.$refs.canvas,n,r),this.draw.onResponse=function(t){return e.setResults(t)},this.addLayer(),this.setCanvasSize({width:n,height:r}),this.$events.on(D["EV_ADD_SVG_TO_LAYER"],function(t){var n=t.url;return e.draw.drawSVG(n,!0)}),this.$events.on(D["EV_COLORIZE"],function(){return e.colorize()}),this.$events.on(D["EV_ADD_LAYER"],function(){return e.addLayer()}),this.$events.on(D["EV_CHANGE_LAYER_NAME"],function(t){return e.draw.changeLayerName(t)}),this.$events.on(D["EV_DELETE_LAYER"],function(t){return e.draw.deleteLayer(t)}),this.$events.on(D["EV_COPY_LAYER"],function(t){return e.draw.copyLayer(t)}),this.$events.on(D["EV_MERGE_LAYER"],function(t){return e.draw.mergeLayer(t)}),this.$events.on(D["EV_UPDATE_LAYER_DEPTH"],function(t){return e.updateLayerDepth(t)}),this.$events.on(D["EV_DOWNLOAD_CANVAS"],function(){return e.download()}),this.$events.on(D["EV_EMPTY_PROJECT"],function(){return e.emptyCanvas()}),this.$events.on(D["EV_ADD_IMAGE"],function(){return e.addImage()})}},{key:"resize",value:function(){var e=this.$el.getBoundingClientRect(),t=e.width,n=e.top,r=document.documentElement.clientHeight-n-20;return this.setCanvasSize({width:t,height:r}),{width:t,height:r}}},{key:"addLayer",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.draw.createLayer(),e.next=3,new Promise(function(e){return setTimeout(e,0)});case 3:this.selectLayer(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSelecteResultChange",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.url,this.draw.drawSVG(n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onSelectModeChange",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.draw.setSelectMode(t),e.next=3,new Promise(function(e){return setTimeout(e,0)});case 3:t!==D["MODE_ADD_TEXT"]&&this.updateText();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onLayersChange",value:function(e){var t=this.draw.project.activeLayer,n=e.map(function(e){var n={id:e.id,name:e.name,selected:e.id===t.id};return n});this.setLayers(n)}},{key:"onShapeChange",value:function(){this.record(this.draw.project.exportJSON({asString:!1}))}},{key:"onActiveLayerChange",value:function(e){e&&this.draw.selectLayer(e.id)}},{key:"onColorChange",value:function(e){this.draw.color=e,this.inputStyle=Object.assign({},this.inputStyle,{color:e})}},{key:"onFontSizeChange",value:function(e){this.draw.fontSize=e,this.inputStyle=Object.assign({},this.inputStyle,{fontSize:e,lineHeight:e})}},{key:"onBrushSizeChange",value:function(e){this.draw.strokeWidth=e}},{key:"doHistory",value:function(e){this.lockHistory(),this.draw.project.clear();var t=this.recordList.length-1-e,n=this.recordList[t];this.draw.project.importJSON(JSON.stringify(n)),this.draw.updateBorder(),this.unlockHistory()}},{key:"selectLayerByCoord",value:function(e){var t=e.openEvent,n=this.relativeCoord(t),r=be()(n,2),i=r[0],o=r[1],a=this.draw.getLayerByCoord(i,o);a&&this.selectLayer(a.id)}},{key:"updateText",value:function(){var e=_e()(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c,u,l,d,p,f,h,v,y,m,g,b,w,_,x,E,O,j;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=10,r=this.$refs.edit,i=this.$el.getBoundingClientRect(),!t||this.selectMode!==D["MODE_ADD_TEXT"]){e.next=28;break}return o={x:0,y:0},o=t instanceof TouchEvent?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.x,y:t.y},this.inputStyle={display:"initial",left:o.x-i.left-n,top:o.y-i.top-n,fontSize:this.fontSize,lineHeight:this.fontSize,color:this.color},e.next=9,new Promise(function(e){return setTimeout(e,0)});case 9:if(r.focus(),a=this.relativeCoord(t),s=be()(a,2),c=s[0],u=s[1],l=this.draw.getLayerByCoord(c,u),l){e.next=14;break}return e.abrupt("return");case 14:if(d=l.children.content.getItem(function(e){return e instanceof ke["PointText"]}),d){e.next=17;break}return e.abrupt("return");case 17:p=d.bounds,f=p.width,h=p.height,v=p.left,y=p.top,this.inputStyle.left=v,this.inputStyle.top=y,this.inputStyle.width=f,this.inputStyle.height=h,d.visible=!1,r.value=d.content,r.setAttribute("data-type","update"),r.setAttribute("data-item-id",d.id.toString()),e.next=55;break;case 28:if(this.inputStyle=Fe,m=r.value,r.value="",m){e.next=33;break}return e.abrupt("return");case 33:if(g="update"===r.getAttribute("data-type"),b=r.getAttribute("data-item-id"),r.setAttribute("data-type",""),r.setAttribute("data-item-id",""),!g){e.next=53;break}if(w=function(e){return e.children.content.getItem(function(e){return e.id===+b})},_=this.draw.project.getItem(w),_){e.next=42;break}return e.abrupt("return");case 42:if(x=w(_),x){e.next=45;break}return e.abrupt("return");case 45:x.content=m,x.fontSize=this.fontSize,x.visible=!0,x.fillColor=this.color,this.draw.selectLayer(_.id),this.draw.updateBorder(),e.next=55;break;case 53:E=r.getBoundingClientRect(),O=E.left,j=E.top,this.draw.addText(m,{left:O-i.left+n,top:j-i.top+n});case 55:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"colorize",value:function(){var e=this;this.$loading.open(),this.draw.colorize().then(function(){var t=_e()(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=new Image,r.src=n,t.next=4,new Promise(function(e){return r.onload=e});case 4:e.$loading.close(),n&&e.$events.emit(D["DIALOG_PREVIEW"],n);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$loading.close()})}},{key:"updateLayerDepth",value:function(e){var t=this;e.forEach(function(e){var n=e.id,r=t.draw.project.layers.find(function(e){return e.id===n});r&&r.sendToBack()})}},{key:"download",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.canvas,e.next=3,new Promise(function(e){return t.toBlob(e)});case 3:n=e.sent,r=URL.createObjectURL(n),i=document.createElement("a"),i.setAttribute("href",r),i.setAttribute("download",Date.now()+".gif"),i.click();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"emptyCanvas",value:function(){var e=this;this.$confirm("确认清空画布吗？").then(function(){e.draw.clearShapes(),e.draw.project.clear(),e.addLayer()})}},{key:"addImage",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=document.createElement("input"),t.type="file",t.accept="image/png, image/jpeg, image/jpg",t.click(),e.next=6,new Promise(function(e){return t.onchange=e});case 6:return n=t.files[0],r=new FileReader,r.readAsDataURL(n),e.next=11,new Promise(function(e){return r.onloadend=e});case 11:e.sent,i=r.result,o=document.createElement("img"),o.src=i,o.onload=function(e){return a.draw.addImage(o)};case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"rotate",value:function(e){var t=0===this.lastRotation.rotation&&0===this.lastRotation.scale,n=e.rotation,r=e.scale,i=n-this.lastRotation.rotation;this.lastRotation.scale;if(this.lastRotation={rotation:n,scale:r},this.selectMode===D["MODE_SELECT"]&&!t){var o=this.draw.project.activeLayer;o&&o.rotate(i)}}},{key:"rotateend",value:function(){this.lastRotation={rotation:0,scale:0}}},{key:"style",get:function(){var e=this.canvasSize,t=e.width,n=(e.height,this.selectMode),r=n===D["MODE_SELECT"]?"move":n===D["MODE_BRUSH"]?"crosshair":n===D["MODE_FILL"]?"crosshair":n===D["MODE_ERASER"]?"crosshair":n===D["MODE_ADD_TEXT"]?"text":n===D["MODE_COLORIZE"]?"cell":null;return{width:t+"px",height:this.canvasSize.height+"px",cursor:r,display:"block"}}},{key:"menu",get:function(){var e=this,t={triggerEvent:["contextmenu"],menu:[{title:"选中",event:this.selectLayerByCoord},{title:"复制",event:function(){return e.$events.emit(D["EV_COPY_LAYER"])}}]};return t}},{key:"relativeCoord",get:function(){var e=this;return function(t){var n=e.$refs.canvas.getBoundingClientRect(),r=n.left,i=n.top,o={x:0,y:0};o=t instanceof TouchEvent?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.x,y:t.y};var a=o,s=a.x,c=a.y;return[s-r,c-i]}}}]),t}(C["Vue"]);Pe([Ve,ze("design:type","function"===typeof(Ge="undefined"!==typeof Ie["ResponseResult"]&&Ie["ResponseResult"])&&Ge||Object)],He.prototype,"selectedResult",void 0),Pe([Ve,ze("design:type","function"===typeof(We="undefined"!==typeof Ie["CanvasSize"]&&Ie["CanvasSize"])&&We||Object)],He.prototype,"canvasSize",void 0),Pe([Ve,ze("design:type",String)],He.prototype,"selectMode",void 0),Pe([Ve,ze("design:type",String)],He.prototype,"color",void 0),Pe([Ve,ze("design:type",Number)],He.prototype,"fontSize",void 0),Pe([Ve,ze("design:type",Number)],He.prototype,"brushSize",void 0),Pe([Be,ze("design:type","function"===typeof(Ye="undefined"!==typeof Ie["Layer"]&&Ie["Layer"])&&Ye||Object)],He.prototype,"activeLayer",void 0),Pe([Te,ze("design:type",Object)],He.prototype,"setResults",void 0),Pe([Te,ze("design:type",Object)],He.prototype,"removeResultItem",void 0),Pe([Te,ze("design:type",Object)],He.prototype,"setCanvasSize",void 0),Pe([Te,ze("design:type",Object)],He.prototype,"setLayers",void 0),Pe([Te,ze("design:type",Object)],He.prototype,"selectLayer",void 0),Pe([Ne,ze("design:type",Number)],He.prototype,"indexR",void 0),Pe([Ne,ze("design:type",Array)],He.prototype,"recordList",void 0),Pe([$e,ze("design:type","function"===typeof(Ue="undefined"!==typeof Ae["Record"]&&Ae["Record"])&&Ue||Object)],He.prototype,"record",void 0),Pe([$e,ze("design:type",Object)],He.prototype,"lockHistory",void 0),Pe([$e,ze("design:type",Object)],He.prototype,"unlockHistory",void 0),Pe([Object(C["Watch"])("selectedResult",{deep:!0}),ze("design:type",Function),ze("design:paramtypes",["function"===typeof(Ze="undefined"!==typeof Ie["ResponseResult"]&&Ie["ResponseResult"])&&Ze||Object]),ze("design:returntype",Promise)],He.prototype,"onSelecteResultChange",null),Pe([Object(C["Watch"])("selectMode"),ze("design:type",Function),ze("design:paramtypes",[String]),ze("design:returntype",Promise)],He.prototype,"onSelectModeChange",null),Pe([Object(C["Watch"])("draw.project.layers"),ze("design:type",Function),ze("design:paramtypes",[Object]),ze("design:returntype",void 0)],He.prototype,"onLayersChange",null),Pe([Object(C["Watch"])("draw.shapes"),Object(Re["Debounce"])(1e3),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],He.prototype,"onShapeChange",null),Pe([Object(C["Watch"])("activeLayer"),ze("design:type",Function),ze("design:paramtypes",["function"===typeof(Je="undefined"!==typeof Ie["Layer"]&&Ie["Layer"])&&Je||Object]),ze("design:returntype",void 0)],He.prototype,"onActiveLayerChange",null),Pe([Object(C["Watch"])("color"),ze("design:type",Function),ze("design:paramtypes",[String]),ze("design:returntype",void 0)],He.prototype,"onColorChange",null),Pe([Object(C["Watch"])("fontSize"),ze("design:type",Function),ze("design:paramtypes",[Number]),ze("design:returntype",void 0)],He.prototype,"onFontSizeChange",null),Pe([Object(C["Watch"])("brushSize"),ze("design:type",Function),ze("design:paramtypes",[Number]),ze("design:returntype",void 0)],He.prototype,"onBrushSizeChange",null),Pe([Object(C["Watch"])("indexR"),ze("design:type",Function),ze("design:paramtypes",[Number]),ze("design:returntype",void 0)],He.prototype,"doHistory",null),He=Pe([C["Component"]],He);var Ge,We,Ye,Ue,Ze,Je,qe=He,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-touch",{on:{"!rotate":function(t){return e.rotate(t)},"!rotateend":function(t){return e.rotateend(t)}}},[n("section",{staticClass:"draw-container"},[n("canvas",{directives:[{name:"resize",rawName:"v-resize",value:e.resize,expression:"resize"},{name:"menu",rawName:"v-menu",value:e.menu,expression:"menu"}],ref:"canvas",style:e.style,on:{click:e.updateText,touchstart:e.updateText}}),n("textarea",{ref:"edit",staticClass:"edit",style:e._f("style")(e.inputStyle)})])])},Qe=[];function Ke(e){n("qx+2")}var et=!1,tt=Ke,nt="data-v-d6fa11d6",rt=null,it=Object(a["a"])(qe,Xe,Qe,et,tt,nt,rt),ot=it.exports,at=(n("U6qc"),{name:"IEditable",props:{value:null,formatter:Function,parser:Function,placeholder:String,dblclick:Boolean,rows:{default:1}},data:function(){return{editing:!1,newValue:this.formatter?this.formatter(this.value):this.value}},watch:{value:function(e){this.newValue=this.formatter?this.formatter(e):e}},methods:{finishInput:function(){if(this.editing=!1,"string"===typeof this.newValue&&""===this.newValue.trim())return this.newValue=this.value;this.newValue=this.formatter?this.formatter(this.newValue):this.newValue,1===this.rows&&"string"===typeof this.newValue&&(this.newValue=this.newValue.trim());var e=this.newValue;this.$emit("input",this.parser?this.parser(e):e),this.$emit("edited",this.parser?this.parser(e):e)},showInput:function(e){var t=this;"dblclick"===e===this.dblclick&&(this.editing=!0,this.$emit("editing"),this.$nextTick(function(){t.$refs.input.focus(),t.$refs.input.select()}))}}}),st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editable-label"},[e.editing?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],ref:"input",staticClass:"editable-label__input",style:{resize:1===e.rows?"none":null},attrs:{rows:e.rows,placeholder:e.placeholder},domProps:{value:e.newValue},on:{blur:e.finishInput,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.finishInput(t):null},input:function(t){t.target.composing||(e.newValue=t.target.value)}}}):n("div",{staticClass:"editable-label__text",on:{click:function(t){e.showInput("click")},dblclick:function(t){e.showInput("dblclick")}}},[!e.placeholder||e.editing||e.newValue?e._e():n("span",{staticClass:"editable-label__placeholder"},[e._v(e._s(e.placeholder))]),e._v("\n    "+e._s(e.newValue)+"\n  ")])])},ct=[];function ut(e){n("j30P")}var lt=!1,dt=ut,pt=null,ft=null,ht=Object(a["a"])(at,st,ct,lt,dt,pt,ft),vt=ht.exports,yt=n("DAYN"),mt=n.n(yt),gt=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bt=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},wt=Object(S["e"])("board",S["c"]),_t=(Object(S["e"])("board",S["d"]),function(e){function t(){return b()(this,t),E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),_()(t,[{key:"mergeLayer",value:function(){var e=this.selectedId,t=this.layers,n=t.findIndex(function(t){return t.id===e})+1,r=t[n].id;console.log(e,r,n),n>=t.length||this.$events.emit(D["EV_MERGE_LAYER"],{fromId:e,toId:r})}},{key:"iconMenu",get:function(){var e=this,t={triggerEvent:["click"],menu:[{title:"复制",event:function(){return e.$events.emit(D["EV_COPY_LAYER"])}},{title:"向下合并",event:function(){return e.mergeLayer()}},{title:"删除",event:function(){return e.$events.emit(D["EV_DELETE_LAYER"],e.selectedId)}}]};return t}}]),t}(C["Vue"]));gt([wt,bt("design:type",Object)],_t.prototype,"selectLayer",void 0),_t=gt([Object(C["Component"])({computed:{layers:{get:function(){return this.$store.state.board.layers.slice().reverse()},set:function(e){this.$events.emit(D["EV_UPDATE_LAYER_DEPTH"],e)}}},components:{IEditable:vt,draggable:mt.a}})],_t);var xt=_t,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{on:{contextmenu:function(e){return e.preventDefault()}}},[n("div",{staticClass:"layer-list-header"},[n("div",{staticClass:"layer-title"},[e._v("图层")]),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"icon-add g-icon-button",on:{click:function(t){e.$events.emit(e.EV_ADD_LAYER)}}},[e._v("+")])]),n("div",{staticClass:"layer-list"},[n("draggable",{model:{value:e.layers,callback:function(t){e.layers=t},expression:"layers"}},e._l(e.layers,function(t,r){return n("div",{key:r,staticClass:"list-item",on:{click:function(n){e.selectLayer(t)}}},[n("div",[e._v(e._s(t.selected?"◉":""))]),n("div",{staticClass:"layer-name"},[n("IEditable",{attrs:{value:t.name||t.id,placeholder:"图层命名"},on:{input:function(t){e.$events.emit(e.EV_CHANGE_LAYER_NAME,t)}}})],1),n("v-icon",{directives:[{name:"menu",rawName:"v-menu",value:e.iconMenu,expression:"iconMenu"}],staticClass:"layer-operation",attrs:{color:"grey lighten-1"},on:{click:function(n){e.selectedId=t.id}}},[e._v("more_vert")])],1)}))],1)])},Ot=[];function jt(e){n("37ai")}var Rt=!1,kt=jt,Ct="data-v-a89d0eda",St=null,Dt=Object(a["a"])(xt,Et,Ot,Rt,kt,Ct,St),Mt=Dt.exports,Lt={name:"ITipButton",props:{button:{type:Object,default:{}},highlight:Boolean,color:String}},It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e.DEVICE_MOBILE?[n("v-tooltip",{attrs:{disabled:!e.button.tip,top:""}},[n("v-btn",{style:{color:e.color},attrs:{slot:"activator",color:e.highlight?"primary":null,icon:""},slot:"activator"},[n("v-icon",[e._v(e._s(e.button.icon))])],1),n("span",{domProps:{textContent:e._s(e.button.tip)}})],1)]:[n("v-btn",{style:{color:e.color},attrs:{color:e.highlight?"primary":null,icon:""}},[n("v-icon",[e._v(e._s(e.button.icon))])],1),n("small",{domProps:{textContent:e._s(e.button.tip)}})]],2)},At=[];function Pt(e){n("HN+T")}var zt=!1,Tt=Pt,Vt="data-v-4e27eaf3",Bt=null,$t=Object(a["a"])(Lt,It,At,zt,Tt,Vt,Bt),Nt=$t.exports,Ft=n("Zzkc"),Ht=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Gt=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Wt=(Object(S["e"])("board",S["d"]),Object(S["e"])("board",S["c"])),Yt=function(e){function t(){var e;return b()(this,t),e=E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.colors="black",e}return j()(t,e),_()(t,[{key:"changeColor",value:function(e){var t=e.rgba,n=t.r,r=t.g,i=t.b,o=t.a;this.setColor("rgba(".concat(n,",").concat(r,",").concat(i,",").concat(o,")"))}}]),t}(C["Vue"]);Ht([Wt,Gt("design:type",Object)],Yt.prototype,"setColor",void 0),Yt=Ht([Object(C["Component"])({components:{"color-picker":Ft["Sketch"]}})],Yt);var Ut=Yt,Zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("color-picker",{on:{input:e.changeColor},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)},Jt=[],qt=!1,Xt=null,Qt=null,Kt=null,en=Object(a["a"])(Ut,Zt,Jt,qt,Xt,Qt,Kt),tn=en.exports,nn=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rn=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":k()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},on=Object(S["e"])("board",S["d"]),an=Object(S["e"])("board",S["c"]),sn=function(e){function t(){return b()(this,t),E()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),t}(C["Vue"]);nn([on,rn("design:type",String)],sn.prototype,"selectMode",void 0),nn([on,rn("design:type",Number)],sn.prototype,"brushSize",void 0),nn([an,rn("design:type",Object)],sn.prototype,"setBrushSize",void 0),sn=nn([C["Component"]],sn);var cn=sn,un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"container"},[n("small",[e._v("画笔大小："+e._s(e.brushSize))]),n("v-slider",{staticClass:"py-0",attrs:{min:1,max:32,value:e.brushSize,"hide-details":""},on:{input:e.setBrushSize}})],1)},ln=[];function dn(e){n("VtGi")}var pn=!1,fn=dn,hn="data-v-59efd272",vn=null,yn=Object(a["a"])(cn,un,ln,pn,fn,hn,vn),mn=yn.exports,gn={name:"IIconButton",components:{ITipButton:Nt,IColorSetting:tn,IBrushSetting:mn},props:{button:{type:Object,default:{name:String,tip:String,icon:String,type:String}},highlight:Boolean},computed:m()({},Object(se["e"])("board",["selectMode","color"]))},bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.button.type?["color","size"].includes(e.button.type)?n("v-menu",{attrs:{"offset-y":"","nudge-top":"-20","close-on-content-click":!1}},["color"===e.button.type?[n("i-tip-button",{attrs:{slot:"activator",button:e.button,color:e.color},slot:"activator"}),"color"===e.button.type?n("IColorSetting"):e._e()]:[n("i-tip-button",{attrs:{slot:"activator",button:e.button},slot:"activator"}),"size"===e.button.type?n("IBrushSetting"):e._e()]],2):e._e():n("i-tip-button",{attrs:{button:e.button,highlight:e.selectMode===e.button.name}})},wn=[],_n=!1,xn=null,En=null,On=null,jn=Object(a["a"])(gn,bn,wn,_n,xn,En,On),Rn=jn.exports,kn={name:"IToolbar",components:{ILayerList:Mt,IIconButton:Rn},data:function(){var e=this,t=[{name:D["MODE_SELECT"],icon:"iconfont icon-pointer",tip:"选择"},{name:D["MODE_BRUSH"],icon:"mode_edit",tip:"画笔"},{name:D["MODE_ERASER"],icon:"iconfont icon-mianxingtubiao_xiangpica",tip:"橡皮擦"},{name:D["MODE_FILL"],icon:"format_color_fill",tip:"填充"},{name:D["MODE_ADD_TEXT"],icon:"title",tip:"添加文本"}],n=[{name:D["MODE_CHANGE_COLOR"],icon:"color_lens",tip:"调色板",type:"color"},{name:D["MODE_BRUSH_SIZE"],icon:"gesture",tip:"画笔大小",type:"size"},{name:D["MODE_COLORIZE"],icon:"assistant",tip:"一键上色",event:function(){return e.$events.emit(D["EV_COLORIZE"])}},{name:D["MODE_ADD_IMAGE"],icon:"image",tip:"添加图片",event:function(){return e.$events.emit(D["EV_ADD_IMAGE"])}},{name:D["MODE_DOWNLOAD"],icon:"file_download",tip:"下载",event:function(){return e.$events.emit(D["EV_DOWNLOAD_CANVAS"])}},{name:D["MODE_EMPTY"],icon:"delete_forever",tip:"清空",event:function(){return e.$events.emit(D["EV_EMPTY_PROJECT"])}}];return{toolList:t,toolListRight:n}},methods:m()({},Object(se["d"])("board",["changeSelectMode"])),computed:m()({},Object(se["e"])("board",["selectMode","layers"]))},Cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs6:""}},e._l(e.toolList,function(t,r){return n("IIconButton",{key:r,staticClass:"icon-button",attrs:{button:t},nativeOn:{click:function(n){e.changeSelectMode(t.name)}}})})),n("v-flex",{attrs:{xs6:""}},e._l(e.toolListRight,function(e,t){return n("IIconButton",{key:t,staticClass:"icon-button",attrs:{button:e},nativeOn:{click:function(t){e.event&&e.event()}}})}))],1)},Sn=[];function Dn(e){n("zGjP")}var Mn=!1,Ln=Dn,In="data-v-5c78ab2c",An=null,Pn=Object(a["a"])(kn,Cn,Sn,Mn,Ln,In,An),zn=Pn.exports,Tn={name:"IDoHistory",components:{ITipButton:Nt},computed:m()({},Object(se["c"])("history",["enableUndo","enableRedo"]),{history:function(){var e=localStorage.history;return e}}),methods:m()({},Object(se["d"])("history",["undo","redo"]))},Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("ITipButton",{class:{show:e.enableUndo},attrs:{button:{tip:"撤销",icon:"undo"}},nativeOn:{click:function(t){return e.undo(t)}}}),n("ITipButton",{class:{show:e.enableRedo},attrs:{button:{tip:"重做",icon:"redo"}},nativeOn:{click:function(t){return e.redo(t)}}})],1)},Bn=[];function $n(e){n("oL6C")}var Nn=!1,Fn=$n,Hn="data-v-f536988c",Gn=null,Wn=Object(a["a"])(Tn,Vn,Bn,Nn,Fn,Hn,Gn),Yn=Wn.exports,Un={name:"ISidebar",components:{ILayerList:Mt,IToolbar:zn,IDoHistory:Yn},computed:m()({},Object(se["e"])("board",["canvasSize"]),{height:function(){return D["DEVICE_MOBILE"]?"100%":this.canvasSize.height+"px"}})},Zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container",style:{height:e.height}},[n("div",{staticClass:"opration-list"},[n("IToolbar")],1),n("div",{staticClass:"do-history"},[n("IDoHistory")],1),n("div",{staticClass:"layer-list"},[n("ILayerList")],1)])},Jn=[];function qn(e){n("qOAO")}var Xn=!1,Qn=qn,Kn="data-v-332de150",er=null,tr=Object(a["a"])(Un,Zn,Jn,Xn,Qn,Kn,er),nr=tr.exports,rr=n("fKPv"),ir=n.n(rr),or={name:"IPreview",data:function(e){return{url:"",show:!1}},events:ir()({},D["DIALOG_PREVIEW"],function(e){this.url=e,this.show=!0})},ar=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":e.DEVICE_MOBILE?"90%":"50%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("一键上色：")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.show=!1}}},[n("v-icon",[e._v("close")])],1)],1),n("img",{attrs:{src:e.url,width:"100%`",height:"auto",align:"center"}})],1)],1)},sr=[],cr=!1,ur=null,lr=null,dr=null,pr=Object(a["a"])(or,ar,sr,cr,ur,lr,dr),fr=pr.exports,hr={name:"IBoard",components:{IDraw:ot,ISidebar:nr,IPreview:fr}},vr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md9:"",lg10:"",xl11:""}},[n("v-card",[n("IDraw")],1)],1),n("v-flex",{staticClass:"side-bar",attrs:{xs0:"",sm0:"",md3:"",lg2:"",xl1:""}},[e.DEVICE_MOBILE?e._e():n("ISidebar")],1)],1)],1),n("IPreview")],1)},yr=[];function mr(e){n("oppo")}var gr=!1,br=mr,wr="data-v-31813673",_r=null,xr=Object(a["a"])(hr,vr,yr,gr,br,wr,_r),Er=xr.exports,Or={name:"IDrawer",components:{ISidebar:nr},data:function(){return{open:!1}},events:ir()({},D["EV_TOGGLE_DRAWER"],function(){this.open=!this.open})},jr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{staticClass:"drawer",attrs:{width:"120","disable-resize-watcher":!0,clipped:"",touchless:"",app:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("ISidebar")],1)},Rr=[];function kr(e){n("gnze")}var Cr=!1,Sr=kr,Dr=null,Mr=null,Lr=Object(a["a"])(Or,jr,Rr,Cr,Sr,Dr,Mr),Ir=Lr.exports,Ar={components:{IHader:me,IBoard:Er,IDrawer:Ir}},Pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{light:""}},[n("IHader"),n("IBoard"),n("IDrawer")],1)},zr=[],Tr=!1,Vr=null,Br=null,$r=null,Nr=Object(a["a"])(Ar,Pr,zr,Tr,Vr,Br,$r),Fr=Nr.exports;r["default"].use(v["a"]);var Hr=new v["a"]({routes:[{path:"/",name:"home",component:Fr}]});n("VjuZ");r["default"].use(se["a"]);var Gr=n("yNxW"),Wr={};Gr.keys().forEach(function(e){var t=Gr(e).default,n=function(e){return Object.defineProperty(Wr,e,{value:t,enumerable:!0})};t.name?n(t.name):n(e.replace(/(\.\/|\.js|\.ts)/g,""))});var Yr=new se["a"].Store({strict:!1,modules:Wr}),Ur=Yr;for(var Zr in Wr){var Jr=Wr[Zr].subscribe;Jr&&Yr.subscribe(Jr)}var qr=n("ydGU");Object(qr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Xr=n("3EgV"),Qr=n.n(Xr),Kr=(n("7zck"),n("j1ja"),n("EZrF")),ei=n.n(Kr),ti={data:function(){return D}},ni=n("ivXw");r["default"].filter("style",function(e){e=Object(ni["b"])(e);var t=["width","height","fontSize","lineHeight","left","top","right","bottom","padding","bottom"];return Object.keys(e).forEach(function(n){t.includes(n)&&(e[n]+="px")}),e});var ri=n("I0MY"),ii=n.n(ri),oi={name:"GlobalMenu",data:function(){return{style:{container:{display:"none"}},temp:{left:null,top:null,event:null}}},methods:{show:function(e,t,n){var r=this;this.temp={left:e,top:t,event:n},this.style.container={},this.$nextTick(function(){var n=document.documentElement,i=n.clientWidth,o=n.clientHeight;e=Object(ni["a"])(0,i-r.$root.$el.clientWidth-10,e),t=Object(ni["a"])(0,o-r.$root.$el.clientHeight-10,t),r.style.container={left:e+"px",top:t+"px"}})},close:function(){this.style.container={display:"none"}},click:function(e,t){e.event&&e.event({item:e,openEvent:this.temp.event,selectEvent:t}),this.close()}}},ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"none"!==e.style.container.display?n("div",{staticClass:"menu-container",style:e.style.container},[n("ul",{staticClass:"menu"},e._l(e.menu,function(t,r){return n("li",{key:r,staticClass:"menu-item",on:{click:function(n){e.click(t,n)}}},[e._v(e._s(t.title))])}))]):e._e()},si=[];function ci(e){n("rMn4")}var ui=!1,li=ci,di="data-v-0d822f3e",pi=null,fi=Object(a["a"])(oi,ai,si,ui,li,di,pi),hi=fi.exports,vi={install:function(e){e.directive("menu",{bind:function(t,n,r){var i=n.value,o=r.context,a=e.extend(m()({},hi,{data:function(){return m()({},hi.data(),{menu:i.menu})}})),s=(new a).$mount();o.$data.$menuVm=s,document.body.appendChild(s.$el);var c=function(n){return vi.contextmenu({Vue:e,el:t,value:i,event:n,menuVm:s})};i.triggerEvent.forEach(function(e){return t.addEventListener(e,c)}),document.addEventListener("mousedown",function(e){~e.target.className.indexOf("menu")||s.close()})},unbind:function(e,t,n){n.context;var r=Object(je["get"])("context","$data.$menuVm,$el"),i=Object(je["get"])(r,"parentElement");i&&parnet.removeChild(r)}})},contextmenu:function(e){var t=e.event,n=e.menuVm;t.preventDefault();var r=t.pageX,i=t.pageY;n.show(r,i,t)}},yi=vi,mi={name:"GlobalLoading",data:function(e){return{show:!1}},methods:{open:function(){this.show=!0},close:function(){this.show=!1}}},gi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"loading-container"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e()},bi=[];function wi(e){n("DlIb")}var _i=!1,xi=wi,Ei="data-v-07553818",Oi=null,ji=Object(a["a"])(mi,gi,bi,_i,xi,Ei,Oi),Ri=ji.exports,ki={install:function(e){var t=e.extend(Ri),n=(new t).$mount();document.body.appendChild(n.$el),e.prototype.$loading={open:n.open,close:n.close}}},Ci=ki,Si={name:"GlobalConfirm",data:function(e){return{show:!1,title:"",content:""}},methods:{open:function(e){var t=this,n="提示",r="";return e instanceof Object?(e.title&&(n="提示"),r=e.content):r=e,this.title=n,this.content=r,this.show=!0,new Promise(function(e){return t.$confirm=e})}}},Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",{attrs:{color:"white"}},[e.title?n("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]):e._e(),e.content?n("v-card-text",[e._v(e._s(e.content))]):e._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue",flat:""},on:{click:function(t){e.show=!1}}},[e._v("取消")]),n("v-btn",{attrs:{color:"blue",flat:""},on:{click:function(t){e.show=!1}},nativeOn:{click:function(t){return e.$confirm(t)}}},[e._v("确认")])],1)],1)],1)],1)},Mi=[],Li=!1,Ii=null,Ai=null,Pi=null,zi=Object(a["a"])(Si,Di,Mi,Li,Ii,Ai,Pi),Ti=zi.exports,Vi={install:function(e){var t=e.extend(Ti),n=(new t).$mount();document.body.appendChild(n.$el),e.prototype.$confirm=n.open}},Bi=Vi;r["default"].use(Qr.a),r["default"].use(ei.a),r["default"].use(ii.a),r["default"].use(yi),r["default"].use(Ci),r["default"].use(Bi),r["default"].config.productionTip=!1,r["default"].mixin(ti);new r["default"]({router:Hr,store:Ur,render:function(e){return e(h)}}).$mount("#app");var $i=ti.data();$i.DEVICE_MOBILE,$i.SYSTEM_IOS},x38r:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\nsection[data-v-4e27eaf3] {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  white-space: nowrap;\n  overflow: hidden;\n}\nsmall[data-v-4e27eaf3] {\n  white-space: nowrap;\n}\n",""])},xXwu:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n* {\n  -webkit-overflow-scrolling: touch;\n}\nhtml {\n  overflow: auto;\n}\n@media only screen and (max-width: 599px) {\n.container {\n    padding: 10px;\n}\n}\n@media only screen and (min-width: 599px) {\n*::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n}\n*::-webkit-scrollbar-thumb {\n    background: rgba(0, 0, 0, 0);\n    border-radius: 5px;\n}\n*:hover::-webkit-scrollbar-thumb {\n    background: #bdbdbd;\n}\n*:active::-webkit-scrollbar-thumb {\n    background: #9e9e9e;\n}\n}\n.g-icon-button {\n  min-width: 20px;\n  height: inherit;\n  min-height: 20px;\n  text-align: center;\n  color: #424242;\n  border-radius: 2px;\n}\n.g-icon-button:hover {\n  background: #f5f5f5;\n}\n.g-icon-button:active {\n  background: #eeeeee;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n",""])},yNxW:function(e,t,n){var r={"./board.ts":"q8N1","./history.ts":"qCMr"};function i(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="yNxW"},z8QP:function(e,t,n){var r=n("zsHr");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("7d500b2a",r,!0,{shadowMode:!1,sourceMap:!1})},zGjP:function(e,t,n){var r=n("vd+d");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("rjj0").default;i("6f9836ea",r,!0,{shadowMode:!1,sourceMap:!1})},zJp4:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.drawer {\n  padding: 0;\n  -webkit-transition: 0.05s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  transition: 0.05s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  opacity: 0.92;\n}\n",""])},zsHr:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.text-setting-container[data-v-ba9a784e] {\n  position: relative;\n  display: inline-block;\n  height: inherit;\n  overflow-x: auto;\n  overflow-y: hidden;\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.text-setting-container .subtitle[data-v-ba9a784e] {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: inherit;\n  line-height: 100%;\n  font-size: 1.2em;\n  color: #757575;\n}\n",""])}},[0]);
//# sourceMappingURL=app.79737e02.js.map